{% extends 'base.html' %}
{% block title %}Spline Lineal{% endblock %}

{% block content %}
<h1>Método Spline Lineal</h1>
<form method="post">
    {% csrf_token %}
    <div class="form-group">
        <label for="x">Vector x:</label>
        <input type="text" id="x" name="x" placeholder="[1, 2, 3]" required value="{{ x }}">
        <div class="help-text">Ingrese una lista ordenada y sin valores repetidos.</div>
        <div class="example-text">Ejemplo: [1, 2, 3]</div>
    </div>
    <div class="form-group">
        <label for="y">Vector y:</label>
        <input type="text" id="y" name="y" placeholder="[2, 3, 5]" required value="{{ y }}">
        <div class="help-text">Ingrese los valores correspondientes de y.</div>
        <div class="example-text">Ejemplo: [2, 3, 5]</div>
    </div>
    <button type="submit">Interpolar</button>
</form>

{% if resultado %}
    <div class="resultados">
        <h2>Coeficientes del Spline Lineal</h2>
        <p>{{ resultado.coef }}</p>
        <h3>Gráfica</h3>
        {% if resultado.grafica_base64 %}
            <img src="data:image/png;base64,{{ resultado.grafica_base64 }}" alt="Gráfica Spline Lineal">
        {% else %}
            <div style="color: #e74c3c; margin: 1rem 0;">No se pudo generar la gráfica para los datos ingresados.</div>
        {% endif %}
    </div>
    <div class="comparative-analysis">
        <form method="post" action="{% url 'informe_comparativo_interpolacion' %}">
            {% csrf_token %}
            <input type="hidden" name="metodo_original" value="spline_lineal">
            <input type="hidden" name="x" value="{{ x }}">
            <input type="hidden" name="y" value="{{ y }}">
            <button type="submit" class="comparative-button">➡️ Generar informe comparativo con otros métodos de interpolación</button>
        </form>
    </div>
{% endif %}
{% endblock %}

{% block extra_css %}
<style>
.form-group {
    margin-bottom: 15px;
}
.help-text {
    font-size: 0.9em;
    color: #6c757d;
}
.example-text {
    font-size: 0.85em;
    color: #17a2b8;
}
.resultados {
    margin-top: 30px;
}
</style>
{% endblock %}